# ขนาดสูงสุดของ ZFS ARC
เมื่อไม่นานนี้ ฉันอ่านเจอข้อสับสนมากมายเกี่ยวกับ ZFS ที่ใช้ RAM เป็นจำนวนมาก

วิธีแก้ปัญหานั้นง่ายมาก เพียงแค่สร้างไฟล์การกำหนดค่าโมดูล zfs และตั้งค่าหน่วยความจำตามจำนวนที่ต้องการตามกฎ (4G + "จำนวน TB ทั้งหมดในพูล" * 1GB)

ทั้งหมดนี้อาจสร้างความสับสนได้มาก และถือเป็นการดำเนินการแบบครั้งเดียว ซึ่งต้องอ่านข้อมูลจำนวนมากเพื่อให้ตั้งค่าได้อย่างถูกต้อง

เพื่อลดความซับซ้อน ฉันจึงเขียนสคริปต์ที่ทำทุกอย่างด้วยตัวเอง และอนุญาตให้กำหนดขนาดด้วยตนเองหรือตั้งขนาดที่แนะนำโดยอัตโนมัติ

## การกำหนดค่า
สคริปต์เกือบจะพร้อมใช้งานแล้ว แต่หากคุณต้องการตั้งค่าตำแหน่งหรือชื่อ `zfs.conf` อื่น โปรดแก้ไขตัวแปร `mod_config`

หากการติดตั้งของคุณมีโฟลเดอร์ pve อื่นที่ไม่ใช่ `/etc/pve` (ซึ่งไม่น่าจะเป็นไปได้อย่างยิ่ง) ให้แก้ไขตัวแปร `pve_dir`

## การใช้งาน
- ดาวน์โหลด
- รันในฐานะ root (เพราะว่า /etc/modprobe.d เป็นของ root และ config ต้องไปที่นั่น)

### อธิบายสักนิดครับ
`ขนาดแคชที่ประเมิน` - แสดงโดยสคริปต์คือข้อมูลที่ประเมินด้วยผลรวมของขนาดพูลที่มีอยู่ในระบบโดยใช้สูตรด้านบน

`ขนาดแคชที่แนะนำ` - พิจารณาว่า `ขนาดแคชที่ประเมินแล้ว` น้อยกว่าขั้นต่ำที่แนะนำคือ 8GB หรือไม่ กล่าวอีกนัยหนึ่ง: หาก `ขนาดแคชที่ประเมินแล้ว` ต่ำกว่า 8GB ระบบจะแนะนำให้ตั้งค่าเป็น 8GB ในกรณีอื่น ระบบจะแนะนำค่าที่ประเมินแล้ว


## ข้อคิดเห็นเกี่ยวกับคุณลักษณะ
- เพิ่มความสามารถในการลบค่าจาก zfs.conf
